import{a as te}from"./chunk-QF2SE2FH.js";import{a as ee}from"./chunk-ELDJLL64.js";import{a as ne}from"./chunk-PQ5DNONA.js";import"./chunk-Y76AUCL5.js";import{a as Q}from"./chunk-IYNBYFV5.js";import{a as W,b as X,c as Y}from"./chunk-JLSB7VRZ.js";import"./chunk-6XQQBANU.js";import{b as B,d as H,f as $,j as z,k as U,l as Z,n as q}from"./chunk-VPZWFYDW.js";import{a as R}from"./chunk-YTKP2FMU.js";import{a as J}from"./chunk-IZVGSZFI.js";import{d as A,e as L,f as D,i as j,r as N,u as G}from"./chunk-GB7V6XFW.js";import"./chunk-BPTFILPP.js";import{a as K}from"./chunk-PSNAPTFY.js";import{$a as s,Ab as b,Bb as V,Cb as w,Ia as o,Ja as S,Sa as l,Va as v,Xa as O,Ya as I,Za as e,_a as i,da as E,db as k,hb as u,ia as y,ib as h,ja as C,ka as c,la as x,nb as d,pb as f,ub as F,vb as T,xb as M,zb as P}from"./chunk-75MKQ6H5.js";var ie=[{descripcion:"Sin asignar",valor:"Sin asignar"},{descripcion:"Pendiente",valor:"Pendiente"},{descripcion:"En proceso",valor:"En proceso"},{descripcion:"Sin solucion",valor:"Sin solucion"},{descripcion:"Completada",valor:"Completada"}];var re=(t,r)=>r.id;function oe(t,r){if(t&1&&(e(0,"option",46),d(1),i()),t&2){let a=r.$implicit;l("value",a.valor),o(),f(" ",a.descripcion," ")}}function ae(t,r){if(t&1&&(e(0,"option",46),d(1),i()),t&2){let a=r.$implicit;l("value",a.idDependencia),o(),f(" ",a.nombre," ")}}function le(t,r){if(t&1){let a=k();e(0,"select",47),u("ngModelChange",function(p){y(a);let n=h();return C(n.dependenciaSeleccionada=p)})("change",function(){y(a);let p=h();return C(p.cambiarPagina(1))}),v(1,ae,2,2,"option",13),i()}if(t&2){let a=h();l("ngModel",a.dependenciaSeleccionada),o(),l("ngForOf",a.dependencias)}}function de(t,r){if(t&1&&(e(0,"div",48)(1,"p",49),s(2,"img",50),e(3,"span",51),d(4),i()()()),t&2){let a=h();o(4),f(" ",a.dependenciaSeleccionadaNombre," ")}}function se(t,r){t&1&&(c(),e(0,"svg",52),s(1,"polyline",53),i())}function ce(t,r){t&1&&(c(),e(0,"svg",54),s(1,"polyline",55),i())}function me(t,r){t&1&&(c(),e(0,"svg",56),s(1,"line",57),i())}function pe(t,r){t&1&&(c(),e(0,"svg",52),s(1,"polyline",53),i())}function ge(t,r){t&1&&(c(),e(0,"svg",54),s(1,"polyline",55),i())}function ue(t,r){t&1&&(c(),e(0,"svg",56),s(1,"line",57),i())}function ve(t,r){t&1&&(c(),e(0,"svg",52),s(1,"polyline",53),i())}function fe(t,r){t&1&&(c(),e(0,"svg",54),s(1,"polyline",55),i())}function _e(t,r){t&1&&(c(),e(0,"svg",56),s(1,"line",57),i())}function Se(t,r){t&1&&(c(),e(0,"svg",52),s(1,"polyline",53),i())}function he(t,r){t&1&&(c(),e(0,"svg",54),s(1,"polyline",55),i())}function xe(t,r){t&1&&(c(),e(0,"svg",56),s(1,"line",57),i())}function be(t,r){t&1&&(c(),e(0,"svg",52),s(1,"polyline",53),i())}function ye(t,r){t&1&&(c(),e(0,"svg",54),s(1,"polyline",55),i())}function Ce(t,r){t&1&&(c(),e(0,"svg",56),s(1,"line",57),i())}var we=(t,r,a,m,p)=>({"bg-indigo-500":t,"bg-blue-500":r,"bg-orange-500":a,"bg-red-500":m,"bg-emerald-500":p}),Ee=t=>["/dashboard/ordenServicio/detalles",t];function Oe(t,r){if(t&1&&(e(0,"tr",58)(1,"td",59)(2,"p",60),d(3),i()(),e(4,"td",59)(5,"p",60),d(6),b(7,"fechaHora"),i()(),e(8,"td",59)(9,"p",61),d(10),b(11,"limitarString"),i()(),e(12,"td",59)(13,"p",62),d(14),i()(),e(15,"td",59)(16,"p",63),d(17),i()(),e(18,"td",64)(19,"span",65)(20,"button",66),c(),e(21,"svg",6),s(22,"path",67)(23,"path",68),i()()()()()),t&2){let a=r.$implicit;o(3),f(" ",a.id," "),o(3),f(" ",V(7,8,a.createdAt)," "),o(3),l("title",a.dependencia.nombre),o(),f(" ",w(11,10,a.dependencia.nombre,20)," "),o(4),f(" ",a.tipoOrdenServicio.descripcion," "),o(2),l("ngClass",P(13,we,a.estadoOrden==="Sin asignar",a.estadoOrden==="En proceso",a.estadoOrden==="Pendiente",a.estadoOrden==="Sin solucion",a.estadoOrden==="Completada")),o(),f(" ",a.estadoOrden," "),o(3),l("routerLink",T(19,Ee,a.id))}}function Ie(t,r){t&1&&(e(0,"tr",69),d(1," a "),i(),e(2,"tr",70)(3,"td",71),d(4," No se encontraron solicitudes "),i()())}var ke=(t,r,a)=>({itemsPerPage:t,currentPage:r,totalItems:a}),nt=(()=>{let r=class r{constructor(m,p,n,g){this.dataService=m,this.authService=p,this.alertService=n,this.ordenesServicioService=g,this.ordenes=[],this.ESTADOS_ORDENES_SERVICIO=ie,this.dependencias=[],this.dependenciaSeleccionada=null,this.dependenciaSeleccionadaNombre="",this.filtro={activo:"true",parametro:"",estado:this.authService.usuario.role==="ADMIN_ROLE"?"Sin asignar":""},this.ordenar={direccion:"desc",columna:"createdAt"},this.paginaActual=1,this.cantidadItems=10}ngOnInit(){this.dataService.ubicacionActual="Portal - Listado de solicitudes",this.dependencias=this.authService.usuario.dependencias,this.dependenciaSeleccionada=this.dependencias[0].idDependencia,this.nombreDependenciaSeleccionada(),this.listarOrdenes()}listarOrdenes(){let m={direccion:this.ordenar.direccion,columna:this.ordenar.columna,estado:this.filtro.estado,dependencia:this.authService.usuario.role==="USER_ROLE"?this.dependenciaSeleccionada:"",parametro:this.filtro.parametro,pagina:this.paginaActual,itemsPorPagina:this.cantidadItems};this.alertService.loading(),this.ordenesServicioService.listarOrdenes(m).subscribe({next:({ordenes:p,totalItems:n})=>{this.totalItems=n,this.ordenes=p,this.alertService.close()},error:({error:p})=>this.alertService.errorApi(p.message)})}nombreDependenciaSeleccionada(){this.dependenciaSeleccionadaNombre=this.dependencias.find(m=>m.idDependencia===Number(this.dependenciaSeleccionada)).nombre}filtrarActivos(m){this.paginaActual=1,this.filtro.activo=m}filtrarParametro(m){this.paginaActual=1,this.filtro.parametro=m}ordenarPorColumna(m){this.ordenar.columna=m,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarOrdenes()}cambiarPagina(m){this.paginaActual=m,this.nombreDependenciaSeleccionada(),this.listarOrdenes()}};r.\u0275fac=function(p){return new(p||r)(S(K),S(R),S(J),S(ne))},r.\u0275cmp=E({type:r,selectors:[["app-ordenes-servicio-final"]],standalone:!0,features:[F],decls:96,vars:30,consts:[[1,"md:max-w-7xl","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nueva orden","routerLink","/dashboard/ordenServicio/nueva",1,"boton-nuevo-header"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"ngModel","ngModelChange","change"],[1,"bg-white","text-sm","focus:outline-none","w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],["class","bg-white text-sm w-full md:max-w-44 focus:outline-none px-2 py-2 md:py-0 md:ml-2 mt-2 md:mt-0 border text-gray-600 border-gray-400 rounded",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","text-xs px-4 mb-2",4,"ngIf"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","w-max","flex","items-center","justify-center","focus:outline-none",3,"click"],[1,"ml-2"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"px-5","py-5","mt-4","text-sm","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"],[3,"value"],[1,"bg-white","text-sm","w-full","md:max-w-44","focus:outline-none","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","ngModelChange","change"],[1,"text-xs","px-4","mb-2"],[1,"bg-gray-100","w-max","p-2","rounded","border","border-gray-300","shadow","flex","items-center"],["src","assets/svg/dependencia.svg","alt","",1,"w-8"],[1,"ml-1"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"animate__animated","hover:bg-gray-50","animate__fadeIn"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"text-gray-900","whitespace-no-wrap"],[1,"text-gray-900","w-max","whitespace-no-wrap",3,"title"],[1,"text-gray-900","w-max","whitespace-no-wrap"],[1,"w-max","whitespace-no-wrap","p-1","text-white","rounded",3,"ngClass"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Detalles de solicitud",1,"p-2","bg-purple-600","text-white","rounded","hover:opacity-90","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],[1,"p-4","text-white"],[1,"w-full"],["colspan","6",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],["class","animate__animated hover:bg-gray-50 animate__fadeIn"]],template:function(p,n){p&1&&(e(0,"div",0)(1,"app-tarjeta-lista")(2,"div",1)(3,"div")(4,"div",2)(5,"div",3)(6,"h2",4),d(7," Listado de solicitudes "),i(),e(8,"p"),d(9),i()(),e(10,"div")(11,"button",5),c(),e(12,"svg",6),s(13,"path",7),i()()()(),x(),e(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"select",12),u("ngModelChange",function(_){return n.filtro.estado=_})("change",function(){return n.cambiarPagina(1)}),d(19,"\\ "),v(20,oe,2,2,"option",13),e(21,"option",14),d(22," Todas "),i()(),e(23,"div",15),c(),e(24,"svg",16),s(25,"path",17),i()()()(),x(),e(26,"div",18)(27,"span",19),c(),e(28,"svg",20),s(29,"path",21),i()(),x(),e(30,"input",22),u("ngModelChange",function(_){return n.filtro.parametro=_})("change",function(){return n.cambiarPagina(1)}),i()(),e(31,"select",23),u("change",function(){return n.cambiarPagina(1)})("ngModelChange",function(_){return n.cantidadItems=_}),e(32,"option",24),d(33," 10 elementos "),i(),e(34,"option",25),d(35," 20 elementos "),i(),e(36,"option",26),d(37," 50 elementos "),i(),e(38,"option",27),d(39," 100 elementos "),i()(),v(40,le,2,2,"select",28),i()(),v(41,de,5,1,"div",29),e(42,"div",30)(43,"div",31)(44,"table",32)(45,"thead")(46,"tr",33)(47,"th",34)(48,"div",35),u("click",function(){return n.ordenarPorColumna("id")}),e(49,"span"),d(50," Numero "),i(),e(51,"span",36),v(52,se,2,0,"svg",37)(53,ce,2,0,"svg",38)(54,me,2,0,"svg",39),i()()(),e(55,"th",34)(56,"div",35),u("click",function(){return n.ordenarPorColumna("createdAt")}),e(57,"span"),d(58," Fecha y hora "),i(),e(59,"span",36),v(60,pe,2,0,"svg",37)(61,ge,2,0,"svg",38)(62,ue,2,0,"svg",39),i()()(),e(63,"th",40)(64,"div",41),u("click",function(){return n.ordenarPorColumna("dependencia.nombre")}),e(65,"span"),d(66," Dependencia "),i(),e(67,"span",42),v(68,ve,2,0,"svg",37)(69,fe,2,0,"svg",38)(70,_e,2,0,"svg",39),i()()(),e(71,"th",40)(72,"div",41),u("click",function(){return n.ordenarPorColumna("tipoOrdenServicio.descripcion")}),e(73,"span"),d(74," Tipo "),i(),e(75,"span",42),v(76,Se,2,0,"svg",37)(77,he,2,0,"svg",38)(78,xe,2,0,"svg",39),i()()(),e(79,"th",43)(80,"div",41),u("click",function(){return n.ordenarPorColumna("activo")}),e(81,"span"),d(82," Estado "),i(),e(83,"span",36),v(84,be,2,0,"svg",37)(85,ye,2,0,"svg",38)(86,Ce,2,0,"svg",39),i()()(),e(87,"th",43),d(88," Acci\xF3n "),i()()(),e(89,"tbody"),O(90,Oe,24,21,"tr",72,re,!1,Ie,5,0),b(93,"paginate"),i()()()()(),e(94,"div",44)(95,"pagination-controls",45),u("pageChange",function(_){return n.cambiarPagina(_)}),i()()()()()),p&2&&(o(9),f(" Total de solicitudes: ",n.totalItems," "),o(9),l("ngModel",n.filtro.estado),o(2),l("ngForOf",n.ESTADOS_ORDENES_SERVICIO),o(10),l("ngModel",n.filtro.parametro),o(),l("ngModel",n.cantidadItems),o(9),l("ngIf",n.authService.usuario.role==="USER_ROLE"),o(),l("ngIf",n.authService.usuario.role==="USER_ROLE"),o(11),l("ngIf",n.ordenar.columna=="id"&&n.ordenar.direccion=="asc"),o(),l("ngIf",n.ordenar.columna=="id"&&n.ordenar.direccion=="desc"),o(),l("ngIf",n.ordenar.columna!="id"),o(6),l("ngIf",n.ordenar.columna=="createdAt"&&n.ordenar.direccion=="asc"),o(),l("ngIf",n.ordenar.columna=="createdAt"&&n.ordenar.direccion=="desc"),o(),l("ngIf",n.ordenar.columna!="createdAt"),o(6),l("ngIf",n.ordenar.columna=="dependencia.nombre"&&n.ordenar.direccion=="asc"),o(),l("ngIf",n.ordenar.columna=="dependencia.nombre"&&n.ordenar.direccion=="desc"),o(),l("ngIf",n.ordenar.columna!="dependencia.nombre"),o(6),l("ngIf",n.ordenar.columna=="tipoOrdenServicio.descripcion"&&n.ordenar.direccion=="asc"),o(),l("ngIf",n.ordenar.columna=="tipoOrdenServicio.descripcion"&&n.ordenar.direccion=="desc"),o(),l("ngIf",n.ordenar.columna!="tipoOrdenServicio.descripcion"),o(6),l("ngIf",n.ordenar.columna=="activo"&&n.ordenar.direccion=="asc"),o(),l("ngIf",n.ordenar.columna=="activo"&&n.ordenar.direccion=="desc"),o(),l("ngIf",n.ordenar.columna!="activo"),o(4),I(w(93,23,n.ordenes,M(26,ke,n.cantidadItems,n.paginaActual,n.totalItems))))},dependencies:[j,A,L,D,q,U,Z,B,z,H,$,ee,Y,W,X,G,N,Q,te],encapsulation:2});let t=r;return t})();export{nt as default};
