import{a as _e}from"./chunk-EU4DQKFS.js";import{a as ge}from"./chunk-ELDJLL64.js";import{a as xe}from"./chunk-YRO5L3ZL.js";import{a as be}from"./chunk-PQ5DNONA.js";import{a as h,b as R,c as N,d as ce,e as X,f as V,g as A,h as H,i as me,j as ue}from"./chunk-Y76AUCL5.js";import{a as ve}from"./chunk-6XQQBANU.js";import{a as fe,b as he,c as Se}from"./chunk-N3QE4A3U.js";import{b as ne,d as oe,f as re,n as ae,o as le}from"./chunk-VPZWFYDW.js";import{a as pe}from"./chunk-U2FQGFRY.js";import{a as de}from"./chunk-IZVGSZFI.js";import{a as se}from"./chunk-PSNAPTFY.js";import{a as ie}from"./chunk-YTKP2FMU.js";import{c as G,d as q,e as Q,f as J,i as K,o as Z,q as ee,u as te}from"./chunk-GB7V6XFW.js";import{$a as D,Ab as x,Bb as w,Ia as d,Ja as b,Sa as m,Va as g,Za as n,_a as i,da as z,db as k,hb as p,ia as C,ib as v,ja as y,ka as E,la as I,nb as o,pb as f,qb as _,ub as B,vb as L,wb as Y,zb as $}from"./chunk-75MKQ6H5.js";function j(t,l){let e=h(t),s=h(l),a=e.getTime()-s.getTime();return a<0?-1:a>0?1:a}function we(t,l){let e=h(t),s=h(l),a=e.getFullYear()-s.getFullYear(),r=e.getMonth()-s.getMonth();return a*12+r}function Ce(t){return t?Math[t]:Math.trunc}function ye(t,l){return h(t).getTime()-h(l).getTime()}function Ee(t){let l=h(t);return l.setHours(23,59,59,999),l}function De(t){let l=h(t),e=l.getMonth();return l.setFullYear(l.getFullYear(),e+1,0),l.setHours(23,59,59,999),l}function Oe(t){let l=h(t);return+Ee(l)==+De(l)}function Me(t,l){let e=h(t),s=h(l),a=j(e,s),r=Math.abs(we(e,s)),c;if(r<1)c=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-a*r);let u=j(e,s)===-a;Oe(h(t))&&r===1&&j(t,s)===1&&(u=!1),c=a*(r-Number(u))}return c===0?0:c}function Ie(t,l,e){let s=ye(t,l)/1e3;return Ce(e?.roundingMethod)(s)}function ke(t,l,e){let s=ce(),a=e?.locale??s.locale??ue,r=2520,c=j(t,l);if(isNaN(c))throw new RangeError("Invalid time value");let u=Object.assign({},e,{addSuffix:e?.addSuffix,comparison:c}),T,F;c>0?(T=h(l),F=h(t)):(T=h(t),F=h(l));let O=Ie(F,T),U=(X(F)-X(T))/1e3,S=Math.round((O-U)/60),P;if(S<2)return e?.includeSeconds?O<5?a.formatDistance("lessThanXSeconds",5,u):O<10?a.formatDistance("lessThanXSeconds",10,u):O<20?a.formatDistance("lessThanXSeconds",20,u):O<40?a.formatDistance("halfAMinute",0,u):O<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):S===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",S,u);if(S<45)return a.formatDistance("xMinutes",S,u);if(S<90)return a.formatDistance("aboutXHours",1,u);if(S<N){let M=Math.round(S/60);return a.formatDistance("aboutXHours",M,u)}else{if(S<r)return a.formatDistance("xDays",1,u);if(S<R){let M=Math.round(S/N);return a.formatDistance("xDays",M,u)}else if(S<R*2)return P=Math.round(S/R),a.formatDistance("aboutXMonths",P,u)}if(P=Me(F,T),P<12){let M=Math.round(S/R);return a.formatDistance("xMonths",M,u)}else{let M=P%12,W=Math.floor(P/12);return M<3?a.formatDistance("aboutXYears",W,u):M<9?a.formatDistance("overXYears",W,u):a.formatDistance("almostXYears",W+1,u)}}var Ve={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d\xEDa",other:"{{count}} d\xEDas"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a\xF1o",other:"alrededor de {{count}} a\xF1os"},xYears:{one:"1 a\xF1o",other:"{{count}} a\xF1os"},overXYears:{one:"m\xE1s de 1 a\xF1o",other:"m\xE1s de {{count}} a\xF1os"},almostXYears:{one:"casi 1 a\xF1o",other:"casi {{count}} a\xF1os"}},Te=(t,l,e)=>{let s,a=Ve[t];return typeof a=="string"?s=a:l===1?s=a.one:s=a.other.replace("{{count}}",l.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"en "+s:"hace "+s:s};var Ue={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},We={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Le={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fe={date:V({formats:Ue,defaultWidth:"full"}),time:V({formats:We,defaultWidth:"full"}),dateTime:V({formats:Le,defaultWidth:"full"})};var Ne={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma\xF1ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Xe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma\xF1ana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Pe=(t,l,e,s)=>l.getHours()!==1?Xe[t]:Ne[t];var ze={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu\xE9s de cristo"]},Be={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1\xBA trimestre","2\xBA trimestre","3\xBA trimestre","4\xBA trimestre"]},Ye={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},$e={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s\xE1"],abbreviated:["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],wide:["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"]},Ge={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma\xF1ana",afternoon:"tarde",evening:"tarde",night:"noche"}},qe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma\xF1ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Qe=(t,l)=>Number(t)+"\xBA",Ae={ordinalNumber:Qe,era:A({values:ze,defaultWidth:"wide"}),quarter:A({values:Be,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:A({values:Ye,defaultWidth:"wide"}),day:A({values:$e,defaultWidth:"wide"}),dayPeriod:A({values:Ge,defaultWidth:"wide",formattingValues:qe,defaultFormattingWidth:"wide"})};var Je=/^(\d+)(º)?/i,Ke=/\d+/i,Ze={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},et={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},tt={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},it={any:[/1/i,/2/i,/3/i,/4/i]},nt={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},ot={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},rt={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},at={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},lt={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},dt={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},He={ordinalNumber:me({matchPattern:Je,parsePattern:Ke,valueCallback:function(t){return parseInt(t,10)}}),era:H({matchPatterns:Ze,defaultMatchWidth:"wide",parsePatterns:et,defaultParseWidth:"any"}),quarter:H({matchPatterns:tt,defaultMatchWidth:"wide",parsePatterns:it,defaultParseWidth:"any",valueCallback:t=>t+1}),month:H({matchPatterns:nt,defaultMatchWidth:"wide",parsePatterns:ot,defaultParseWidth:"any"}),day:H({matchPatterns:rt,defaultMatchWidth:"wide",parsePatterns:at,defaultParseWidth:"any"}),dayPeriod:H({matchPatterns:lt,defaultMatchWidth:"any",parsePatterns:dt,defaultParseWidth:"any"})};var je={code:"es",formatDistance:Te,formatLong:Fe,formatRelative:Pe,localize:Ae,match:He,options:{weekStartsOn:1,firstWeekContainsDate:1}};function st(t,l){if(t&1&&(n(0,"ng-option",41),o(1),i()),t&2){let e=l.$implicit;m("value",e.id),d(),_(" ",e.apellido," ",e.nombre," ")}}function ct(t,l){t&1&&(n(0,"p",42),o(1," No se encontraron usuario "),i())}function mt(t,l){if(t&1){let e=k();n(0,"div",43)(1,"p"),o(2),i(),n(3,"button",44),p("click",function(){let r=C(e).$implicit,c=v();return y(c.eliminarTecnico(r.id))}),E(),n(4,"svg",3),D(5,"path",4),i()()()}if(t&2){let e=l.$implicit;d(2),_(" ",e.apellido," ",e.nombre," ")}}function ut(t,l){if(t&1){let e=k();n(0,"button",45),p("click",function(){C(e);let a=v();return y(a.reactivarSolicitud())}),E(),n(1,"svg",46),D(2,"path",47),i(),I(),n(3,"span",48),o(4," Reactivar "),i()()}}var Re=t=>({"bg-primaryColor text-white":t});function pt(t,l){if(t&1){let e=k();n(0,"div",49)(1,"button",50),p("click",function(){C(e);let a=v();return y(a.cambiarSeccion("Detalles"))}),o(2," Detalles "),i(),n(3,"button",51),p("click",function(){C(e);let a=v();return y(a.cambiarSeccion("Historial"))}),o(4," Historial "),i()()}if(t&2){let e=v();d(),m("ngClass",L(2,Re,e.showSeccion==="Detalles")),d(2),m("ngClass",L(4,Re,e.showSeccion==="Historial"))}}function vt(t,l){if(t&1&&(n(0,"span",63),o(1),i()),t&2){let e=l.$implicit;d(),_(" ",e==null?null:e.apellido," ",e==null?null:e.nombre," ")}}function ft(t,l){if(t&1&&(n(0,"p",55)(1,"span",21),o(2," Tecnicos asignados: "),i(),g(3,vt,2,2,"span",62),i()),t&2){let e=v(2);d(3),m("ngForOf",e.tecnicosAsignados)}}function ht(t,l){if(t&1&&(n(0,"div",64)(1,"p",65)(2,"span",21),o(3," Pendiente desde: "),i(),n(4,"span"),o(5),x(6,"fechaHora"),i()()()),t&2){let e=v(2);d(5),f(" ",w(6,1,e.orden==null?null:e.orden.fechaPendiente)," ")}}var St=(t,l)=>({"bg-red-100 border-red-300":t,"bg-emerald-100 border-emerald-300":l});function gt(t,l){if(t&1&&(n(0,"div")(1,"p",66)(2,"span",21),o(3," Fecha de cierre: "),i(),n(4,"span"),o(5),x(6,"fechaHora"),i()()()),t&2){let e=v(2);d(),m("ngClass",Y(4,St,(e.orden==null?null:e.orden.estadoOrden)==="Sin solucion",(e.orden==null?null:e.orden.estadoOrden)==="Completada")),d(4),f(" ",w(6,2,e.orden==null?null:e.orden.fechaCierre)," ")}}function _t(t,l){if(t&1&&(n(0,"div",55)(1,"p",67)(2,"span",21),o(3," Demora de solucion: "),i(),n(4,"span",68),o(5),i()()()),t&2){let e=v(2);d(5),f(" ",e.demoraSolucion," ")}}function bt(t,l){if(t&1&&(n(0,"div",69)(1,"p",55)(2,"span",21),o(3," Soluci\xF3n: "),i(),n(4,"span"),o(5),i()()()),t&2){let e=v(2);d(5),f(" ",e.orden==null?null:e.orden.comentariosSolucion," ")}}function xt(t,l){if(t&1&&(n(0,"div",70)(1,"p",55)(2,"span",21),o(3," Motivo: "),i(),n(4,"span"),o(5),i()()()),t&2){let e=v(2);d(5),f(" ",e.orden==null?null:e.orden.motivoSinSolucion," ")}}function wt(t,l){if(t&1&&(n(0,"div",71)(1,"p",55)(2,"span",21),o(3," Motivo: "),i(),n(4,"span"),o(5),i()()()),t&2){let e=v(2);d(5),f(" ",e.orden==null?null:e.orden.motivoPendiente," ")}}function Ct(t,l){if(t&1&&(n(0,"div")(1,"div",52),g(2,ft,4,1,"p",53),i(),n(3,"div",54)(4,"p",55)(5,"span",21),o(6," Nro de solicitud: "),i(),n(7,"span"),o(8),i()()(),n(9,"div")(10,"p",55)(11,"span",21),o(12," Fecha de solicitud: "),i(),n(13,"span"),o(14),x(15,"fechaHora"),i()()(),g(16,ht,7,3,"div",56)(17,gt,7,7,"div",39)(18,_t,6,1,"div",53),n(19,"div",54)(20,"p",55)(21,"span",21),o(22," Solicitante: "),i(),n(23,"span"),o(24),n(25,"span",57),o(26),i()()(),n(27,"p",58)(28,"span",21),o(29," Tel. Contacto: "),i(),n(30,"span"),o(31),i()()(),n(32,"div",54)(33,"p",55)(34,"span",21),o(35," Dependencia: "),i(),n(36,"span"),o(37),i()()(),n(38,"div",54)(39,"p",55)(40,"span",21),o(41," Tipo de solicitud: "),i(),n(42,"span"),o(43),i()()(),n(44,"div",54)(45,"p",55)(46,"span",21),o(47," Detalles: "),i(),n(48,"span"),o(49),i()()(),g(50,bt,6,1,"div",59)(51,xt,6,1,"div",60)(52,wt,6,1,"div",61),i()),t&2){let e=v();d(2),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="En proceso"),d(6),f(" ",e.orden==null?null:e.orden.id," "),d(6),f(" ",w(15,16,e.orden==null?null:e.orden.createdAt)," "),d(2),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="Pendiente"),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="Completada"||(e.orden==null?null:e.orden.estadoOrden)==="Sin solucion"),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="Completada"||(e.orden==null?null:e.orden.estadoOrden)==="Sin solucion"),d(6),_(" ",e.orden==null?null:e.orden.usuario.apellido," ",e.orden==null?null:e.orden.usuario.nombre," "),d(2),f(" (Tel. ",e.orden==null?null:e.orden.usuario.telefono,") "),d(5),f(" ",e.orden==null?null:e.orden.telefonoContacto," "),d(6),f(" ",e.orden==null?null:e.orden.dependencia.nombre," "),d(6),f(" ",e.orden==null?null:e.orden.tipoOrdenServicio.descripcion," "),d(6),f(" ",e.orden==null?null:e.orden.observacionSolicitud," "),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="Completada"),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="Sin solucion"),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="Pendiente")}}function yt(t,l){if(t&1){let e=k();n(0,"button",77),p("click",function(){C(e);let a=v(2);return y(a.abrirNoSolucionado())}),o(1," Sin soluci\xF3n "),i()}}function Et(t,l){if(t&1){let e=k();n(0,"button",78),p("click",function(){C(e);let a=v(2);return y(a.abrirPendiente())}),o(1," Pendiente "),i()}}function Dt(t,l){if(t&1){let e=k();n(0,"button",79),p("click",function(){C(e);let a=v(2);return y(a.abrirAsignacion())}),o(1," Continuar "),i()}}function Ot(t,l){if(t&1){let e=k();n(0,"button",80),p("click",function(){C(e);let a=v(2);return y(a.abrirSolucionado())}),o(1," Solucionado "),i()}}function Mt(t,l){if(t&1&&(n(0,"div",72),g(1,yt,2,0,"button",73)(2,Et,2,0,"button",74)(3,Dt,2,0,"button",75)(4,Ot,2,0,"button",76),i()),t&2){let e=v();d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="En proceso"),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="En proceso"),d(),m("ngIf",((e.orden==null?null:e.orden.estadoOrden)==="Sin asignar"||(e.orden==null?null:e.orden.estadoOrden)==="Pendiente")&&e.showSeccion==="Detalles"),d(),m("ngIf",(e.orden==null?null:e.orden.estadoOrden)==="En proceso")}}function It(t,l){if(t&1&&(n(0,"div",90)(1,"div",91)(2,"p",21),o(3," Solicitud generada "),i(),n(4,"p"),o(5),x(6,"fechaHora"),i()(),n(7,"p",92)(8,"span",21),o(9," Usuario: "),i(),o(10),i()()),t&2){let e=v().$implicit;d(5),f(" ",w(6,3,e.createdAt)," "),d(5),_(" ",e.creatorUser.apellido," ",e.creatorUser.nombre," ")}}function kt(t,l){if(t&1&&(n(0,"span",96),o(1),i()),t&2){let e=l.$implicit;d(),_(" ",e.tecnico.apellido," ",e.tecnico.nombre," ")}}function Tt(t,l){if(t&1&&(n(0,"div",93)(1,"div",91)(2,"p",21),o(3," En proceso "),i(),n(4,"p"),o(5),x(6,"fechaHora"),i()(),n(7,"p",92)(8,"span",21),o(9," Usuario: "),i(),o(10),i(),n(11,"p",94),g(12,kt,2,2,"span",95),i()()),t&2){let e=v().$implicit;d(5),f(" ",w(6,4,e.createdAt)," "),d(5),_(" ",e.creatorUser.apellido," ",e.creatorUser.nombre," "),d(2),m("ngForOf",e.OrdenesServicioHistorialToTecnicos)}}function Ft(t,l){if(t&1&&(n(0,"div",97)(1,"div",91)(2,"p",21),o(3," Solicitud sin solucion "),i(),n(4,"p"),o(5),x(6,"fechaHora"),i()(),n(7,"p",92)(8,"span",21),o(9," Usuario: "),i(),o(10),i(),n(11,"p",98)(12,"span",21),o(13," Motivo: "),i(),o(14),i()()),t&2){let e=v().$implicit;d(5),f(" ",w(6,4,e.createdAt)," "),d(5),_(" ",e.creatorUser.apellido," ",e.creatorUser.nombre," "),d(4),f(" ",e.motivoSinSolucion," ")}}function Pt(t,l){if(t&1&&(n(0,"div",99)(1,"div",91)(2,"p",21),o(3," Solicitud pendiente "),i(),n(4,"p"),o(5),x(6,"fechaHora"),i()(),n(7,"p",92)(8,"span",21),o(9," Usuario: "),i(),o(10),i(),n(11,"p",100)(12,"span",21),o(13," Motivo: "),i(),o(14),i()()),t&2){let e=v().$implicit;d(5),f(" ",w(6,4,e.createdAt)," "),d(5),_(" ",e.creatorUser.apellido," ",e.creatorUser.nombre," "),d(4),f(" ",e.motivoPendiente," ")}}function At(t,l){if(t&1&&(n(0,"div",101)(1,"div",91)(2,"p",21),o(3," Solicitud reactivada "),i(),n(4,"p"),o(5),x(6,"fechaHora"),i()(),n(7,"p",92)(8,"span",21),o(9," Usuario: "),i(),o(10),i()()),t&2){let e=v().$implicit;d(5),f(" ",w(6,3,e.createdAt)," "),d(5),_(" ",e.creatorUser.apellido," ",e.creatorUser.nombre," ")}}function Ht(t,l){if(t&1&&(n(0,"div",102)(1,"div",91)(2,"p",21),o(3," Solicitud completada "),i(),n(4,"p"),o(5),x(6,"fechaHora"),i()(),n(7,"p",92)(8,"span",21),o(9," Usuario: "),i(),o(10),i(),n(11,"p",103)(12,"span",21),o(13," Comentarios: "),i(),o(14),i()()),t&2){let e=v().$implicit;d(5),f(" ",w(6,4,e.createdAt)," "),d(5),_(" ",e.creatorUser.apellido," ",e.creatorUser.nombre," "),d(4),f(" ",e.comentariosSolucion," ")}}function jt(t,l){if(t&1&&(n(0,"div",83),g(1,It,11,5,"div",84)(2,Tt,13,6,"div",85)(3,Ft,15,6,"div",86)(4,Pt,15,6,"div",87)(5,At,11,5,"div",88)(6,Ht,15,6,"div",89),i()),t&2){let e=l.$implicit;d(),m("ngIf",e.tipo==="Generada"),d(),m("ngIf",e.tipo==="En proceso"),d(),m("ngIf",e.tipo==="Sin solucion"),d(),m("ngIf",e.tipo==="Pendiente"),d(),m("ngIf",e.tipo==="Reactivada"),d(),m("ngIf",e.tipo==="Completada")}}function Rt(t,l){if(t&1&&(n(0,"div")(1,"div",81),g(2,jt,7,6,"div",82),i()()),t&2){let e=v();d(2),m("ngForOf",e.historialOrden)}}var Vt=(t,l,e,s,a)=>({"bg-indigo-500 text-white":t,"bg-blue-500 text-white":l,"bg-orange-500 text-white":e,"bg-red-500 text-white":s,"bg-emerald-500 text-white":a}),en=(()=>{let l=class l{constructor(s,a,r,c,u,T,F,O,U,S){this.dataService=s,this.usuariosService=a,this.authService=r,this.ordenesServicio=c,this.activatedRoute=u,this.alertService=T,this.ordenesServicioHistorialService=F,this.ordenesServicioToTecnicosService=O,this.router=U,this.location=S,this.demoraSolucion="",this.showSeccion="Detalles",this.showModalAsignacion=!1,this.tecnicoSeleccionado="",this.tecnicosAsignados=[],this.tecnicosParaAsignar=[],this.showSinSolucion=!1,this.motivoSinSolucion="",this.showSolucionado=!1,this.comentariosSolucion="",this.showPendiente=!1,this.motivoPendiente="",this.historialOrden=[],this.idSolicitud="",this.orden=null,this.tecnicos=[]}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Detalles de solicitud",this.alertService.loading(),this.activatedRoute.params.subscribe(({id:s})=>{this.idSolicitud=s,this.obtenerSolicitud()})}regresarRutaAnterior(){this.location.back()}calculoDemoraSolucion(){let s=new Date(this.orden.fechaCierre),a=new Date(this.orden.createdAt);this.demoraSolucion=ke(s,a,{locale:je}),console.log(this.demoraSolucion)}obtenerSolicitud(){this.alertService.loading(),this.ordenesServicio.getOrden(this.idSolicitud).subscribe({next:({orden:s})=>{console.log(s),this.orden=s,this.historialOrden=this.orden.ordenesServicioHistorial,this.calculoDemoraSolucion(),this.tecnicosAsignados=[],s.ordenesServicioTecnico.map(a=>{a.activo&&this.tecnicosAsignados.push(a?.tecnico)}),console.log(this.tecnicosAsignados),this.alertService.close()},error:({error:s})=>this.alertService.errorApi(s.message)})}abrirNoSolucionado(){this.motivoSinSolucion="",this.showSinSolucion=!0}abrirSolucionado(){this.comentariosSolucion="",this.showSolucionado=!0}abrirPendiente(){this.motivoPendiente="",this.showPendiente=!0}solicitudSinSolucion(){if(!this.motivoSinSolucion.trim()){this.alertService.info("El motivo no puede estar vac\xEDo");return}this.alertService.question({msg:"\xBFSolicitud sin soluci\xF3n?",buttonText:"Aceptar"}).then(({isConfirmed:s})=>{if(s){this.alertService.loading();let a={fechaCierre:new Date().toISOString(),estadoOrden:"Sin solucion",motivoSinSolucion:this.motivoSinSolucion,activo:!1};this.ordenesServicio.actualizarOrden(this.idSolicitud,a).subscribe({next:()=>{let r={tipo:"Sin solucion",motivoSinSolucion:this.motivoSinSolucion,ordenServicioId:this.orden.id,creatorUserId:this.authService.usuario.userId};this.ordenesServicioHistorialService.nuevaRelacion(r).subscribe({next:()=>{this.alertService.close(),this.regresarRutaAnterior()},error:({error:c})=>this.alertService.errorApi(c.message)})},error:({error:r})=>this.alertService.errorApi(r.message)})}})}solicitudPendiente(){if(!this.motivoPendiente.trim()){this.alertService.info("El motivo no puede estar vac\xEDo");return}this.alertService.question({msg:"\xBFSolicitud pendiente?",buttonText:"Aceptar"}).then(({isConfirmed:s})=>{if(s){this.alertService.loading();let a={fechaPendiente:new Date().toISOString(),estadoOrden:"Pendiente",motivoPendiente:this.motivoPendiente,activo:!0};this.ordenesServicio.actualizarOrden(this.idSolicitud,a).subscribe({next:()=>{let r={tipo:"Pendiente",motivoPendiente:this.motivoPendiente,ordenServicioId:this.orden.id,creatorUserId:this.authService.usuario.userId};this.ordenesServicioHistorialService.nuevaRelacion(r).subscribe({next:()=>{this.alertService.close(),this.regresarRutaAnterior()},error:({error:c})=>this.alertService.errorApi(c.message)})},error:({error:r})=>this.alertService.errorApi(r.message)})}})}reactivarSolicitud(){this.alertService.question({msg:"\xBFQuieres reactivar la solicitud?",buttonText:"Aceptar"}).then(({isConfirmed:s})=>{if(s){this.alertService.loading();let a={tipo:"Reactivada",motivoSinSolucion:"",ordenServicioId:this.orden.id,creatorUserId:this.authService.usuario.userId,activo:!0};this.ordenesServicioHistorialService.nuevaRelacion(a).subscribe({next:()=>{let r={fechaCierre:new Date().toISOString(),estadoOrden:"Sin asignar",motivoSinSolucion:"",activo:!0};this.ordenesServicio.actualizarOrden(this.idSolicitud,r).subscribe({next:({orden:c})=>{this.orden=c,this.alertService.close()},error:({error:c})=>this.alertService.errorApi(c.message)})},error:({error:r})=>this.alertService.errorApi(r.message)})}})}abrirAsignacion(){this.tecnicoSeleccionado="",this.tecnicosParaAsignar=[],this.alertService.loading(),this.usuariosService.listarUsuarios(1,"apellido","true","true","").subscribe({next:({usuarios:s})=>{this.tecnicos=s,this.showModalAsignacion=!0,this.alertService.close()},error:({error:s})=>this.alertService.errorApi(s.message)})}agregarTecnico(){if(!this.tecnicoSeleccionado){this.alertService.info("Debes seleccionar un t\xE9cnico");return}let s=this.tecnicos.find(a=>a.id===this.tecnicoSeleccionado);this.tecnicosParaAsignar.push(s),this.tecnicos=this.tecnicos.filter(a=>a.id!==this.tecnicoSeleccionado),this.tecnicoSeleccionado=""}eliminarTecnico(s){let a=this.tecnicosParaAsignar.find(r=>r.id===s);this.tecnicosParaAsignar=this.tecnicosParaAsignar.filter(r=>r.id!==s),this.tecnicos.push(a)}asignarTecnicos(){if(this.tecnicosParaAsignar.length===0){this.alertService.info("Debes seleccionar al menos un t\xE9cnico");return}let s={tecnicos:[],fechaEnProceso:new Date().toISOString(),ordenServicioId:this.idSolicitud,creatorUserId:this.authService.usuario.userId};this.tecnicosParaAsignar.forEach(a=>s.tecnicos.push({id:a.id})),this.alertService.question({msg:"\xBFQuieres asignar el/los t\xE9cnicos a la solicitud?",buttonText:"Aceptar"}).then(({isConfirmed:a})=>{a&&(this.alertService.loading(),this.ordenesServicioToTecnicosService.nuevaOrdenTecnico(s).subscribe({next:()=>{let r={tipo:"En proceso",tecnicos:s.tecnicos,ordenServicioId:this.orden.id,creatorUserId:this.authService.usuario.userId};this.ordenesServicioHistorialService.nuevaRelacion(r).subscribe({next:()=>{this.alertService.close(),this.regresarRutaAnterior()},error:({error:c})=>this.alertService.errorApi(c.message)})},error:({error:r})=>this.alertService.errorApi(r.message)}))})}completarSolicitud(){if(!this.comentariosSolucion.trim()){this.alertService.info("Debe describir la soluci\xF3n");return}this.alertService.question({msg:"\xBFQuieres completar la solicitud?",buttonText:"Aceptar"}).then(({isConfirmed:s})=>{if(s){this.alertService.loading();let a={fechaCierre:new Date().toISOString(),comentariosSolucion:this.comentariosSolucion,estadoOrden:"Completada",activo:!1};this.ordenesServicio.actualizarOrden(this.idSolicitud,a).subscribe({next:()=>{let r={tipo:"Completada",ordenServicioId:this.orden.id,comentariosSolucion:this.comentariosSolucion,creatorUserId:this.authService.usuario.userId};this.ordenesServicioHistorialService.nuevaRelacion(r).subscribe({next:()=>{this.alertService.close(),this.regresarRutaAnterior()},error:({error:c})=>this.alertService.errorApi(c.message)})},error:({error:r})=>this.alertService.errorApi(r.message)})}})}cambiarSeccion(s){this.showSeccion=s}};l.\u0275fac=function(a){return new(a||l)(b(se),b(pe),b(ie),b(be),b(Z),b(de),b(xe),b(_e),b(ee),b(G))},l.\u0275cmp=z({type:l,selectors:[["app-detalles-orden-servicio-final"]],standalone:!0,features:[B],decls:104,vars:24,consts:[[3,"showModal"],[1,"p-2","bg-gray-900","text-white","flex","items-center","justify-between"],[1,"hover:text-secondaryColor",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18 18 6M6 6l12 12"],[1,"bg-white","p-2","text-sm"],[1,"flex","items-center"],[1,"w-full","text-sm","p-2","rounded",3,"ngModel","ngModelChange"],["value",""],["class","bg-white",3,"value",4,"ngFor","ngForOf"],["title","Agregar tecnico",1,"boton-crear","rounded",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","title","Agregar tecnico",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"px-2"],[1,"font-semibold","p-2","bg-gray-100","border","border-gray-300"],["class","text-gray-500 italic text-sm mt-2",4,"ngIf"],["class","p-2 flex mt-1 items-center justify-between border-b border-gray-300",4,"ngFor","ngForOf"],[1,"flex","px-2","pb-2","items-center","mt-3"],[1,"w-1/2","boton-eliminar",3,"click"],[1,"w-1/2","ml-2","boton-crear",3,"click"],[1,"p-2","bg-white","text-sm"],[1,"font-semibold"],[1,"text-red-700"],["type","text","placeholder","Ej. Falta de insumos",1,"input-generico","w-full","mt-2",3,"ngModel","keyup.enter","ngModelChange"],[1,"flex","px-2","pb-2","mt-2","items-center","w-full"],[1,"font-semibold","mt-1"],["type","text","placeholder","Ej. Reinstalacion de drivers",1,"input-generico","w-full","mt-2",3,"ngModel","keyup.enter","ngModelChange"],["type","text","placeholder","Ej. Esperando componentes",1,"input-generico","w-full","mt-2",3,"ngModel","keyup.enter","ngModelChange"],[1,"border","border-gray-400","w-11/12","md:w-2/3","mx-auto","mt-2","mb-4"],[1,"bg-gray-900","w-full","text-white","p-3","flex","items-center"],[1,"flex","items-center","justify-between","w-full"],["title","Regresar",1,"hover:text-secondaryColor",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"],[1,"ml-2","text-xl"],[1,"px-2","py-1","mt-1","rounded","w-max","text-xs","ml-2",3,"ngClass"],[1,"mr-2"],["title","Reactivar solicitud","class","p-2 bg-gray-100 transition flex items-center duration-500 hover:bg-yellow-100 text-sm text-gray-900 rounded",3,"click",4,"ngIf"],[1,"p-2","text-sm"],["class","border border-gray-400 rounded",4,"ngIf"],[4,"ngIf"],["class","md:flex space-y-2 items-center md:mt-3",4,"ngIf"],[1,"bg-white",3,"value"],[1,"text-gray-500","italic","text-sm","mt-2"],[1,"p-2","flex","mt-1","items-center","justify-between","border-b","border-gray-300"],["title","Eliminar tecnico",1,"text-red-700",3,"click"],["title","Reactivar solicitud",1,"p-2","bg-gray-100","transition","flex","items-center","duration-500","hover:bg-yellow-100","text-sm","text-gray-900","rounded",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"size-4"],["stroke-linecap","round","stroke-linejoin","round","d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"],[1,"ml-1"],[1,"border","border-gray-400","rounded"],[1,"w-1/2","p-2","font-semibold",3,"ngClass","click"],[1,"w-1/2","p-2","font-semibold","border-l","border-gray-400",3,"ngClass","click"],[1,"mt-4"],["class","p-2",4,"ngIf"],[1,"border-y"],[1,"p-2"],["class","border-t",4,"ngIf"],[1,"text-xs"],[1,"p-2","border-t"],["class","bg-emerald-100 border border-emerald-400 rounded text-black",4,"ngIf"],["class","bg-red-100 border border-red-400 rounded text-black",4,"ngIf"],["class","bg-orange-100 border border-orange-400 rounded text-black",4,"ngIf"],["class","text-xs py-1 px-2 bg-blue-100 text-black border border-blue-400 ml-2 rounded",4,"ngFor","ngForOf"],[1,"text-xs","py-1","px-2","bg-blue-100","text-black","border","border-blue-400","ml-2","rounded"],[1,"border-t"],[1,"p-2","bg-orange-100","border","border-orange-400","rounded"],[1,"p-2","text-black","border","rounded",3,"ngClass"],[1,"py-1"],[1,"bg-gray-100","px-2","py-1","rounded","border","border-gray-400","ml-1"],[1,"bg-emerald-100","border","border-emerald-400","rounded","text-black"],[1,"bg-red-100","border","border-red-400","rounded","text-black"],[1,"bg-orange-100","border","border-orange-400","rounded","text-black"],[1,"md:flex","space-y-2","items-center","md:mt-3"],["class","boton-eliminar mt-2 w-full md:w-1/2",3,"click",4,"ngIf"],["class","boton-pendiente md:ml-2 w-full md:w-1/2",3,"click",4,"ngIf"],["class","boton-crear w-full md:ml-2",3,"click",4,"ngIf"],["class","boton-crear w-full md:w-1/2 md:ml-2",3,"click",4,"ngIf"],[1,"boton-eliminar","mt-2","w-full","md:w-1/2",3,"click"],[1,"boton-pendiente","md:ml-2","w-full","md:w-1/2",3,"click"],[1,"boton-crear","w-full","md:ml-2",3,"click"],[1,"boton-crear","w-full","md:w-1/2","md:ml-2",3,"click"],[1,"p-2","max-h-96","overflow-y-auto"],["class","border mb-4 rounded text-sm border-gray-400",4,"ngFor","ngForOf"],[1,"border","mb-4","rounded","text-sm","border-gray-400"],["class","border-l-8 border-indigo-500 rounded-l p-2",4,"ngIf"],["class","border-l-8 border-blue-500 rounded-l p-2",4,"ngIf"],["class","border-l-8 border-red-500 rounded-l p-2",4,"ngIf"],["class","border-l-8 border-orange-400 rounded-l p-2",4,"ngIf"],["class","border-l-8 border-yellow-400 rounded-l p-2",4,"ngIf"],["class","border-l-8 border-green-400 rounded-l p-2",4,"ngIf"],[1,"border-l-8","border-indigo-500","rounded-l","p-2"],[1,"flex","items-center","justify-between"],[1,"mt-2"],[1,"border-l-8","border-blue-500","rounded-l","p-2"],[1,"mt-4","mb-2"],["class","bg-blue-100 text-black rounded mr-2 border text-xs border-blue-400 p-2",4,"ngFor","ngForOf"],[1,"bg-blue-100","text-black","rounded","mr-2","border","text-xs","border-blue-400","p-2"],[1,"border-l-8","border-red-500","rounded-l","p-2"],[1,"mt-2","bg-red-100","border","border-red-300","rounded","text-black","p-2"],[1,"border-l-8","border-orange-400","rounded-l","p-2"],[1,"mt-2","bg-orange-100","rounded","text-black","border","border-orange-400","p-2"],[1,"border-l-8","border-yellow-400","rounded-l","p-2"],[1,"border-l-8","border-green-400","rounded-l","p-2"],[1,"mt-2","bg-emerald-100","rounded","text-black","border","border-emerald-400","p-2"]],template:function(a,r){a&1&&(n(0,"app-modal",0)(1,"div")(2,"div",1)(3,"h1"),o(4," Asignacion de tecnico "),i(),n(5,"button",2),p("click",function(){return r.showModalAsignacion=!1}),E(),n(6,"svg",3),D(7,"path",4),i()()(),I(),n(8,"div",5)(9,"div",6)(10,"ng-select",7),p("ngModelChange",function(u){return r.tecnicoSeleccionado=u}),n(11,"ng-option",8),o(12," Seleccionar tecnico "),i(),g(13,st,2,3,"ng-option",9),i(),n(14,"button",10),p("click",function(){return r.agregarTecnico()}),E(),n(15,"svg",11),D(16,"path",12),i()()(),I(),n(17,"div",13)(18,"p",14),o(19," Usuarios asignados "),i(),g(20,ct,2,0,"p",15)(21,mt,6,2,"div",16),i()(),n(22,"div",17)(23,"button",18),p("click",function(){return r.showModalAsignacion=!r.showModalAsignacion}),o(24," Cancelar "),i(),n(25,"button",19),p("click",function(){return r.asignarTecnicos()}),o(26," Asignar "),i()()()(),n(27,"app-modal",0)(28,"div")(29,"div",1)(30,"h1"),o(31," Solicitud sin soluci\xF3n "),i(),n(32,"button",2),p("click",function(){return r.showSinSolucion=!1}),E(),n(33,"svg",3),D(34,"path",4),i()()(),I(),n(35,"div",20)(36,"p",21)(37,"span",22),o(38," * "),i(),o(39," Motivo "),i(),n(40,"input",23),p("keyup.enter",function(){return r.solicitudSinSolucion()})("ngModelChange",function(u){return r.motivoSinSolucion=u}),i()(),n(41,"div",24)(42,"button",18),p("click",function(){return r.showSinSolucion=!1}),o(43," Cancelar "),i(),n(44,"button",19),p("click",function(){return r.solicitudSinSolucion()}),o(45," Aceptar "),i()()()(),n(46,"app-modal",0)(47,"div")(48,"div",1)(49,"h1"),o(50," Solicitud solucionada "),i(),n(51,"button",2),p("click",function(){return r.showSolucionado=!1}),E(),n(52,"svg",3),D(53,"path",4),i()()(),I(),n(54,"div",20)(55,"p",25)(56,"span",22),o(57," * "),i(),o(58," Comentarios "),i(),n(59,"input",26),p("keyup.enter",function(){return r.completarSolicitud()})("ngModelChange",function(u){return r.comentariosSolucion=u}),i()(),n(60,"div",24)(61,"button",18),p("click",function(){return r.showSolucionado=!1}),o(62," Cancelar "),i(),n(63,"button",19),p("click",function(){return r.completarSolicitud()}),o(64," Aceptar "),i()()()(),n(65,"app-modal",0)(66,"div")(67,"div",1)(68,"h1"),o(69," Solicitud pendiente "),i(),n(70,"button",2),p("click",function(){return r.showPendiente=!1}),E(),n(71,"svg",3),D(72,"path",4),i()()(),I(),n(73,"div",20)(74,"p",25)(75,"span",22),o(76," * "),i(),o(77," Motivo "),i(),n(78,"input",27),p("keyup.enter",function(){return r.solicitudPendiente()})("ngModelChange",function(u){return r.motivoPendiente=u}),i()(),n(79,"div",24)(80,"button",18),p("click",function(){return r.showPendiente=!1}),o(81," Cancelar "),i(),n(82,"button",19),p("click",function(){return r.solicitudPendiente()}),o(83," Aceptar "),i()()()(),n(84,"div",28)(85,"div",29)(86,"div",30)(87,"div",6)(88,"button",31),p("click",function(){return r.regresarRutaAnterior()}),E(),n(89,"svg",3),D(90,"path",32),i()(),I(),n(91,"div")(92,"h1",33),o(93," Detalles de solicitud "),i(),n(94,"p",34),o(95),i()()(),n(96,"div",35),g(97,ut,5,0,"button",36),i()()(),n(98,"div",37)(99,"div"),g(100,pt,5,6,"div",38)(101,Ct,53,18,"div",39)(102,Mt,5,4,"div",40),i(),g(103,Rt,3,1,"div",39),i()()),a&2&&(m("showModal",r.showModalAsignacion),d(10),m("ngModel",r.tecnicoSeleccionado),d(3),m("ngForOf",r.tecnicos),d(7),m("ngIf",r.tecnicosParaAsignar.length===0),d(),m("ngForOf",r.tecnicosParaAsignar),d(6),m("showModal",r.showSinSolucion),d(13),m("ngModel",r.motivoSinSolucion),d(6),m("showModal",r.showSolucionado),d(13),m("ngModel",r.comentariosSolucion),d(6),m("showModal",r.showPendiente),d(13),m("ngModel",r.motivoPendiente),d(16),m("ngClass",$(18,Vt,(r.orden==null?null:r.orden.estadoOrden)==="Sin asignar",(r.orden==null?null:r.orden.estadoOrden)==="En proceso",(r.orden==null?null:r.orden.estadoOrden)==="Pendiente",(r.orden==null?null:r.orden.estadoOrden)==="Sin solucion",(r.orden==null?null:r.orden.estadoOrden)==="Completada")),d(),f(" ",r.orden==null?null:r.orden.estadoOrden," "),d(2),m("ngIf",(r.orden==null?null:r.orden.estadoOrden)==="Sin solucion"&&r.authService.usuario.role!=="USER_ROLE"),d(3),m("ngIf",r.authService.usuario.role!=="USER_ROLE"),d(),m("ngIf",r.showSeccion==="Detalles"),d(),m("ngIf",r.authService.usuario.role!=="USER_ROLE"&&r.showSeccion==="Detalles"),d(),m("ngIf",r.showSeccion==="Historial"))},dependencies:[te,ae,ne,oe,re,Se,he,fe,le,ve,K,q,Q,J,ge],encapsulation:2});let t=l;return t})();export{en as default};
