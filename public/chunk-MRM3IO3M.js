import{l as W}from"./chunk-Y76AUCL5.js";import{a as X,b as Y}from"./chunk-IYNBYFV5.js";import{a as Z,b as ee,c as te}from"./chunk-JLSB7VRZ.js";import{a as ie}from"./chunk-HXLRW6WH.js";import{a as ne}from"./chunk-6XQQBANU.js";import{b as H,d as U,f as $,j as O,k as q,l as Q,n as R}from"./chunk-VPZWFYDW.js";import{a as N}from"./chunk-YTKP2FMU.js";import{a as J}from"./chunk-IZVGSZFI.js";import{f as z,i as B,u as G}from"./chunk-GB7V6XFW.js";import"./chunk-BPTFILPP.js";import{a as K}from"./chunk-PSNAPTFY.js";import{$a as u,Ab as k,Bb as E,Cb as P,Db as L,Ia as s,Ja as C,Sa as c,Va as x,Xa as M,Ya as V,Za as e,_a as n,da as I,db as w,ga as T,hb as f,ia as v,ib as b,ja as _,ka as g,la as y,mb as D,nb as l,pb as S,qb as A,ub as j,wb as F}from"./chunk-75MKQ6H5.js";var re=(()=>{let a=class a{transform(o,r,t){let d,m;return t==="true"?d=!0:t==="false"?d=!1:d=null,d!==null?m=o.filter(h=>h.activo==d):d===null&&(m=o),r=r.toLocaleLowerCase(),r.length!==0?m.filter(h=>h.nombre.toLocaleLowerCase().includes(r)):m}};a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=T({name:"filtroDependencias",type:a,pure:!0,standalone:!0});let i=a;return i})();var oe=(i,a)=>a.id;function le(i,a){if(i&1&&(e(0,"div",62)(1,"div",63)(2,"p",64),l(3," Fecha de alta "),n(),e(4,"div",65),l(5),k(6,"fecha"),n()(),e(7,"div",66)(8,"p",64),l(9," Usuario creador "),n(),e(10,"div",67),l(11),n()()()),i&2){let p=b();s(5),S(" ",E(6,3,p.dependenciaSeleccionada.createdAt)," "),s(6),A(" ",p.dependenciaSeleccionada.creatorUser.apellido.toLowerCase()," ",p.dependenciaSeleccionada.creatorUser.nombre.toLowerCase()," ")}}function se(i,a){if(i&1){let p=w();e(0,"button",68),f("click",function(){v(p);let r=b();return _(r.nuevaDependencia())}),l(1," Crear dependencia "),n()}}function ce(i,a){if(i&1){let p=w();e(0,"button",69),f("click",function(){v(p);let r=b();return _(r.actualizarDependencia())}),l(1," Actualizar dependencia "),n()}}function de(i,a){i&1&&(g(),e(0,"svg",70),u(1,"polyline",71),n())}function me(i,a){i&1&&(g(),e(0,"svg",72),u(1,"polyline",73),n())}function pe(i,a){i&1&&(g(),e(0,"svg",74),u(1,"line",75),n())}function ue(i,a){i&1&&(g(),e(0,"svg",70),u(1,"polyline",71),n())}function fe(i,a){i&1&&(g(),e(0,"svg",72),u(1,"polyline",73),n())}function ge(i,a){i&1&&(g(),e(0,"svg",74),u(1,"line",75),n())}function he(i,a){i&1&&(g(),e(0,"svg",70),u(1,"polyline",71),n())}function ve(i,a){i&1&&(g(),e(0,"svg",72),u(1,"polyline",73),n())}function _e(i,a){i&1&&(g(),e(0,"svg",74),u(1,"line",75),n())}function xe(i,a){if(i&1){let p=w();e(0,"tr",76)(1,"td",77),u(2,"img",78),n(),e(3,"td",77)(4,"p",79),l(5),n()(),e(6,"td",77)(7,"p",80),l(8),k(9,"fecha"),n()(),e(10,"td",77)(11,"app-pastilla-estado",81),f("click",function(){let t=v(p).$implicit,d=b();return _(d.actualizarEstado(t))}),n()(),e(12,"td",82)(13,"span",83)(14,"button",84),f("click",function(){let t=v(p).$implicit,d=b();return _(d.abrirModal("editar",t))}),g(),e(15,"svg",21),u(16,"path",85),n()()()()()}if(i&2){let p=a.$implicit;s(5),S(" ",p.nombre," "),s(3),S(" ",E(9,3,p.createdAt)," "),s(3),c("activo",p.activo)}}function be(i,a){i&1&&(e(0,"tr",86),l(1," a "),n(),e(2,"tr",87)(3,"td",88),l(4," No se encontraron dependencias "),n()())}function we(i,a){if(i&1){let p=w();e(0,"div",89)(1,"pagination-controls",90),f("pageChange",function(r){v(p);let t=b();return _(t.paginaActual=r)}),n()()}}var Se=(i,a)=>({itemsPerPage:i,currentPage:a}),Ne=(()=>{let a=class a{constructor(o,r,t,d){this.dependenciasService=o,this.authService=r,this.alertService=t,this.dataService=d,this.showModalDependencia=!1,this.estadoFormulario="crear",this.idDependencia="",this.dependencias=[],this.nombre="",this.paginaActual=1,this.cantidadItems=10,this.filtro={activo:"true",parametro:""},this.ordenar={direccion:"asc",columna:"nombre"}}ngOnInit(){this.dataService.ubicacionActual="Portal - Dependencias",this.alertService.loading(),this.listarDependencias()}abrirModal(o,r=null){this.reiniciarFormulario(),this.nombre="",this.idDependencia="",o==="editar"?this.getDependencia(r):this.showModalDependencia=!0,this.estadoFormulario=o}getDependencia(o){this.alertService.loading(),this.idDependencia=o.id,this.dependenciaSeleccionada=o,this.dependenciasService.getDependencia(o.id).subscribe({next:({dependencia:r})=>{this.nombre=r.nombre,this.alertService.close(),this.showModalDependencia=!0},error:({error:r})=>this.alertService.errorApi(r.message)})}listarDependencias(){let o={direccion:this.ordenar.direccion,columna:this.ordenar.columna};this.dependenciasService.listarDependencias(o).subscribe({next:({dependencias:r})=>{this.dependencias=r,this.showModalDependencia=!1,this.alertService.close()},error:({error:r})=>this.alertService.errorApi(r.message)})}nuevaDependencia(){if(this.nombre.trim()===""){this.alertService.info("Debes colocar un nombre");return}this.alertService.loading();let o={nombre:this.nombre,creatorUserId:this.authService.usuario.userId};this.dependenciasService.nuevaDependencia(o).subscribe({next:()=>{this.alertService.loading(),this.listarDependencias()},error:({error:r})=>this.alertService.errorApi(r.message)})}actualizarDependencia(){if(this.nombre.trim()===""){this.alertService.info("Debes colocar un nombre");return}this.alertService.loading();let o={nombre:this.nombre};this.dependenciasService.actualizarDependencia(this.idDependencia,o).subscribe({next:()=>{this.alertService.loading(),this.listarDependencias()},error:({error:r})=>this.alertService.errorApi(r.message)})}actualizarEstado(o){let{id:r,activo:t}=o;this.alertService.question({msg:"\xBFQuieres actualizar el estado?",buttonText:"Actualizar"}).then(({isConfirmed:d})=>{d&&(this.alertService.loading(),this.dependenciasService.actualizarDependencia(r,{activo:!t}).subscribe({next:()=>{this.alertService.loading(),this.listarDependencias()},error:({error:m})=>this.alertService.errorApi(m.message)}))})}reiniciarFormulario(){this.nombre=""}filtrarActivos(o){this.paginaActual=1,this.filtro.activo=o}filtrarParametro(o){this.paginaActual=1,this.filtro.parametro=o}ordenarPorColumna(o){this.ordenar.columna=o,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarDependencias()}};a.\u0275fac=function(r){return new(r||a)(C(ie),C(N),C(J),C(K))},a.\u0275cmp=I({type:a,selectors:[["app-dependencias"]],standalone:!0,features:[j],decls:104,vars:29,consts:[[3,"showModal"],[3,"keyup.enter"],[1,"flex","items-center","justify-between","bg-gray-800","rounded-t","p-2"],[1,"text-white","px-2","py-1","rounded-t","text-lg"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"cursor-pointer","feather","feather-x","text-white","mr-2",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"px-4","pt-2","max-h-96","overflow-y-auto","text-sm"],[1,"font-semibold"],[1,"text-red-500"],["placeholder","Ej. Contaduria","type","text",1,"input-generico","w-full","my-2",3,"ngModel","ngModelChange"],["class","xl:flex items-center mt-1",4,"ngIf"],[1,"px-2","pb-2","mt-2"],["class","boton-crear w-full",3,"click",4,"ngIf"],["class","boton-editar w-full mt-2",3,"click",4,"ngIf"],[1,"md:max-w-7xl","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nueva dependencia",1,"boton-nuevo-header",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"change"],["txtActivo",""],["value","true"],["value","false"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"keyup"],["txtParametro",""],[1,"bg-white","text-sm","focus:outline-none","w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"flex","items-center","focus:outline-none"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","w-max","flex","items-center","justify-center","focus:outline-none",3,"click"],[1,"ml-2"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],["class","px-5 text-sm py-5 mt-4 bg-white border-t flex shadow flex-col xs:flex-row items-center xs:justify-between",4,"ngIf"],[1,"xl:flex","items-center","mt-1"],[1,"xl:w-1/2"],[1,"font-semibold","text-sm"],[1,"border","text-sm","mt-2","border-gray-400","rounded","p-2","bg-white"],[1,"xl:ml-4","xl:w-1/2","mt-4","xl:mt-0"],[1,"border","text-sm","capitalize","mt-2","border-gray-400","rounded","p-2","bg-white"],[1,"boton-crear","w-full",3,"click"],[1,"boton-editar","w-full","mt-2",3,"click"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"animate__animated","animate__fadeIn","hover:bg-gray-50"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],["src","assets/svg/dependencia.svg","alt","",1,"w-10"],[1,"text-gray-900","w-max","whitespace-no-wrap"],[1,"text-gray-900","whitespace-no-wrap"],[3,"activo","click"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Editar dependencia",1,"boton-editar","ml-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"],[1,"p-4","text-white"],[1,"w-full"],["colspan","4",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],[1,"px-5","text-sm","py-5","mt-4","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"],["class","animate__animated animate__fadeIn hover:bg-gray-50"]],template:function(r,t){if(r&1){let d=w();e(0,"app-modal",0)(1,"div",1),f("keyup.enter",function(){return t.estadoFormulario==="crear"?t.nuevaDependencia():t.actualizarDependencia()}),e(2,"div",2)(3,"h1",3),l(4),n(),g(),e(5,"svg",4),f("click",function(){return t.showModalDependencia=!1}),u(6,"line",5)(7,"line",6),n()(),y(),e(8,"div",7)(9,"p",8)(10,"span",9),l(11," * "),n(),l(12," Nombre "),n(),e(13,"input",10),f("ngModelChange",function(h){return t.nombre=h}),n(),x(14,le,12,5,"div",11),n(),e(15,"div",12),x(16,se,2,0,"button",13)(17,ce,2,0,"button",14),n()()(),e(18,"div",15)(19,"app-tarjeta-lista")(20,"div",16)(21,"div")(22,"div",17)(23,"div",18)(24,"h2",19),l(25," Dependencias "),n(),e(26,"p"),l(27),n()(),e(28,"div")(29,"button",20),f("click",function(){return t.abrirModal("crear")}),g(),e(30,"svg",21),u(31,"path",22),n()()()(),y(),e(32,"div",23)(33,"div",24)(34,"div",25)(35,"div",26)(36,"select",27,28),f("change",function(){v(d);let h=D(37);return _(t.filtrarActivos(h.value))}),e(38,"option",29),l(39," Activos "),n(),e(40,"option",30),l(41," Inactivos "),n(),e(42,"option",31),l(43," Todos "),n()(),e(44,"div",32),g(),e(45,"svg",33),u(46,"path",34),n()()()(),y(),e(47,"div",35)(48,"span",36),g(),e(49,"svg",37),u(50,"path",38),n()(),y(),e(51,"input",39,40),f("keyup",function(){v(d);let h=D(52);return _(t.filtrarParametro(h.value))}),n()(),e(53,"select",41),f("change",function(){return t.paginaActual=1})("ngModelChange",function(h){return t.cantidadItems=h}),e(54,"option",42),l(55," 10 elementos "),n(),e(56,"option",43),l(57," 20 elementos "),n(),e(58,"option",44),l(59," 50 elementos "),n(),e(60,"option",45),l(61," 100 elementos "),n()()()(),e(62,"div",46)(63,"div",47)(64,"table",48)(65,"thead")(66,"tr",49)(67,"th",50)(68,"div",51)(69,"span"),l(70," Imagen "),n()()(),e(71,"th",50)(72,"div",52),f("click",function(){return t.ordenarPorColumna("nombre")}),e(73,"span"),l(74," Nombre "),n(),e(75,"span",53),x(76,de,2,0,"svg",54)(77,me,2,0,"svg",55)(78,pe,2,0,"svg",56),n()()(),e(79,"th",57)(80,"div",58),f("click",function(){return t.ordenarPorColumna("createdAt")}),e(81,"span"),l(82," Fecha de creaci\xF3n "),n(),e(83,"span",59),x(84,ue,2,0,"svg",54)(85,fe,2,0,"svg",55)(86,ge,2,0,"svg",56),n()()(),e(87,"th",60)(88,"div",52),f("click",function(){return t.ordenarPorColumna("activo")}),e(89,"span"),l(90," Estado "),n(),e(91,"span",59),x(92,he,2,0,"svg",54)(93,ve,2,0,"svg",55)(94,_e,2,0,"svg",56),n()()(),e(95,"th",60),l(96," Acci\xF3n "),n()()(),e(97,"tbody"),M(98,xe,17,5,"tr",91,oe,!1,be,5,0),k(101,"paginate"),k(102,"filtroDependencias"),n()()()()(),x(103,we,2,0,"div",61),n()()()}r&2&&(c("showModal",t.showModalDependencia),s(4),S(" ",t.estadoFormulario=="crear"?"Creando dependencia":"Editando dependencia"," "),s(9),c("ngModel",t.nombre),s(),c("ngIf",t.dependenciaSeleccionada&&t.estadoFormulario==="editar"),s(2),c("ngIf",t.estadoFormulario=="crear"),s(),c("ngIf",t.estadoFormulario=="editar"),s(10),S(" Total de dependencias: ",t.dependencias.length," "),s(26),c("ngModel",t.cantidadItems),s(23),c("ngIf",t.ordenar.columna=="nombre"&&t.ordenar.direccion=="asc"),s(),c("ngIf",t.ordenar.columna=="nombre"&&t.ordenar.direccion=="desc"),s(),c("ngIf",t.ordenar.columna!="nombre"),s(6),c("ngIf",t.ordenar.columna=="createdAt"&&t.ordenar.direccion=="asc"),s(),c("ngIf",t.ordenar.columna=="createdAt"&&t.ordenar.direccion=="desc"),s(),c("ngIf",t.ordenar.columna!="createdAt"),s(6),c("ngIf",t.ordenar.columna=="activo"&&t.ordenar.direccion=="asc"),s(),c("ngIf",t.ordenar.columna=="activo"&&t.ordenar.direccion=="desc"),s(),c("ngIf",t.ordenar.columna!="activo"),s(4),V(P(101,19,L(102,22,t.dependencias,t.filtro.parametro,t.filtro.activo),F(26,Se,t.cantidadItems,t.paginaActual))),s(5),c("ngIf",t.dependencias.length>t.cantidadItems))},dependencies:[B,z,R,q,Q,H,O,U,$,W,ne,te,Z,ee,G,Y,X,re],encapsulation:2});let i=a;return i})();export{Ne as default};
