import{a as te}from"./chunk-XMVHMTMG.js";import{a as ee}from"./chunk-QLDXPDF4.js";import{a as ne}from"./chunk-LWJER6AY.js";import"./chunk-BLBYMOAD.js";import{a as Q}from"./chunk-NGTPSM6F.js";import{a as W,b as X,c as Y}from"./chunk-BX65QZJP.js";import"./chunk-IK4XLTHM.js";import{b as R,d as z,f as H,j as U,k as $,l as Z,n as q}from"./chunk-VOCB5AGH.js";import{a as J}from"./chunk-RBLGMK4C.js";import"./chunk-JN7XREYN.js";import{a as K}from"./chunk-3KZ72TDH.js";import{a as D}from"./chunk-PQOFM3HX.js";import{d as A,e as L,f as j,i as G,r as N,u as B}from"./chunk-UUW4ZCCK.js";import{$a as t,Ab as b,Bb as V,Cb as C,Ja as o,Ka as _,Ta as a,Wa as v,Ya as O,Za as k,_a as e,ab as c,da as E,eb as F,ia as y,ib as g,ja as w,jb as S,ka as s,la as x,ob as l,qb as f,vb as I,wb as T,xb as M,zb as P}from"./chunk-CDSXNTXE.js";var ie=(n,r)=>r.id;function re(n,r){if(n&1&&(e(0,"option",51),l(1),t()),n&2){let d=r.$implicit;a("value",d.idDependencia),o(1),f(" ",d.nombre," ")}}function oe(n,r){if(n&1){let d=F();e(0,"select",49),g("ngModelChange",function(p){y(d);let i=S();return w(i.dependenciaSeleccionada=p)})("change",function(){y(d);let p=S();return w(p.cambiarPagina(1))}),v(1,re,2,2,"option",50),t()}if(n&2){let d=S();a("ngModel",d.dependenciaSeleccionada),o(1),a("ngForOf",d.dependencias)}}function ae(n,r){if(n&1&&(e(0,"div",52)(1,"p",53)(2,"span"),l(3),t()()()),n&2){let d=S();o(3),f(" ",d.dependenciaSeleccionadaNombre," ")}}function le(n,r){n&1&&(s(),e(0,"svg",54),c(1,"polyline",55),t())}function de(n,r){n&1&&(s(),e(0,"svg",56),c(1,"polyline",57),t())}function se(n,r){n&1&&(s(),e(0,"svg",58),c(1,"line",59),t())}function ce(n,r){n&1&&(s(),e(0,"svg",54),c(1,"polyline",55),t())}function me(n,r){n&1&&(s(),e(0,"svg",56),c(1,"polyline",57),t())}function pe(n,r){n&1&&(s(),e(0,"svg",58),c(1,"line",59),t())}function ue(n,r){n&1&&(s(),e(0,"svg",54),c(1,"polyline",55),t())}function ge(n,r){n&1&&(s(),e(0,"svg",56),c(1,"polyline",57),t())}function ve(n,r){n&1&&(s(),e(0,"svg",58),c(1,"line",59),t())}function fe(n,r){n&1&&(s(),e(0,"svg",54),c(1,"polyline",55),t())}function he(n,r){n&1&&(s(),e(0,"svg",56),c(1,"polyline",57),t())}function _e(n,r){n&1&&(s(),e(0,"svg",58),c(1,"line",59),t())}function Se(n,r){n&1&&(s(),e(0,"svg",54),c(1,"polyline",55),t())}function xe(n,r){n&1&&(s(),e(0,"svg",56),c(1,"polyline",57),t())}function be(n,r){n&1&&(s(),e(0,"svg",58),c(1,"line",59),t())}var ye=(n,r,d,m)=>({"bg-yellow-500":n,"bg-red-500":r,"bg-green-700":d,"bg-blue-700":m}),we=n=>["/dashboard/ordenServicio/detalles",n];function Ce(n,r){if(n&1&&(e(0,"tr",60)(1,"td",61)(2,"p",62),l(3),t()(),e(4,"td",61)(5,"p",62),l(6),b(7,"fechaHora"),t()(),e(8,"td",61)(9,"p",63),l(10),b(11,"limitarString"),t()(),e(12,"td",61)(13,"p",64),l(14),t()(),e(15,"td",61)(16,"p",65),l(17),t()(),e(18,"td",66)(19,"span",67)(20,"button",68),s(),e(21,"svg",6),c(22,"path",69)(23,"path",70),t()()()()()),n&2){let d=r.$implicit;o(3),f(" ",d.id," "),o(3),f(" ",V(7,8,d.createdAt)," "),o(3),a("title",d.dependencia.nombre),o(1),f(" ",C(11,10,d.dependencia.nombre,20)," "),o(4),f(" ",d.tipoOrdenServicio.descripcion," "),o(2),a("ngClass",P(13,ye,d.estadoOrden==="Pendiente",d.estadoOrden==="Rechazada",d.estadoOrden==="Completada",d.estadoOrden==="En proceso")),o(1),f(" ",d.estadoOrden," "),o(3),a("routerLink",T(18,we,d.id))}}function Ee(n,r){n&1&&(e(0,"tr",71),l(1," a "),t(),e(2,"tr",72)(3,"td",73),l(4," No se encontraron solicitudes "),t()())}var Oe=(n,r)=>({itemsPerPage:n,currentPage:r}),Xe=(()=>{let r=class r{constructor(m,p,i,u){this.dataService=m,this.authService=p,this.alertService=i,this.ordenesServicioService=u,this.ordenes=[],this.dependencias=[],this.dependenciaSeleccionada=null,this.dependenciaSeleccionadaNombre="",this.filtro={activo:"true",parametro:"",estado:"Pendiente"},this.ordenar={direccion:"desc",columna:"createdAt"},this.paginaActual=1,this.cantidadItems=10}ngOnInit(){this.dataService.ubicacionActual="Dashboard - Listado de solicitudes",this.dependencias=this.authService.usuario.dependencias,this.dependenciaSeleccionada=this.dependencias[0].idDependencia,this.nombreDependenciaSeleccionada(),this.listarOrdenes()}listarOrdenes(){let m={direccion:this.ordenar.direccion,columna:this.ordenar.columna,estado:this.filtro.estado,dependencia:this.authService.usuario.role==="USER_ROLE"?this.dependenciaSeleccionada:"",parametro:this.filtro.parametro,pagina:this.paginaActual,itemsPorPagina:this.cantidadItems};this.alertService.loading(),this.ordenesServicioService.listarOrdenes(m).subscribe({next:({ordenes:p,totalItems:i})=>{this.totalItems=i,this.ordenes=p,console.log(this.ordenes),this.alertService.close()},error:({error:p})=>this.alertService.errorApi(p.message)})}nombreDependenciaSeleccionada(){this.dependenciaSeleccionadaNombre=this.dependencias.find(m=>m.idDependencia===Number(this.dependenciaSeleccionada)).nombre}filtrarActivos(m){this.paginaActual=1,this.filtro.activo=m}filtrarParametro(m){this.paginaActual=1,this.filtro.parametro=m}ordenarPorColumna(m){this.ordenar.columna=m,this.ordenar.direccion=this.ordenar.direccion=="asc"?"desc":"asc",this.alertService.loading(),this.listarOrdenes()}cambiarPagina(m){this.paginaActual=m,this.nombreDependenciaSeleccionada(),this.listarOrdenes()}};r.\u0275fac=function(p){return new(p||r)(_(K),_(D),_(J),_(ne))},r.\u0275cmp=E({type:r,selectors:[["app-ordenes-servicio-final"]],standalone:!0,features:[I],decls:102,vars:28,consts:[[1,"md:max-w-7xl","mx-auto"],[1,"container","mx-auto"],[1,"flex","items-center","justify-between","bg-gray-800","px-4","py-3","rounded-t"],[1,"ml-2","text-white"],[1,"text-xl","md:text-2xl","leading-tight"],["title","Nueva orden","routerLink","/dashboard/ordenServicio/nueva",1,"boton-nuevo-header"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M12 4.5v15m7.5-7.5h-15"],[1,"md:flex","md:items-center","md:justify-between","px-4","py-2"],[1,"my-2","flex","sm:flex-row","flex-col"],[1,"flex","flex-row","mb-1","sm:mb-0"],[1,"relative"],[1,"h-full","text-sm","rounded-r","border-t","border-l","rounded-l","sm:rounded-r-none","sm:border-r-0","border-r","border-b","block","appearance-none","w-full","bg-white","border-gray-400","text-gray-700","py-2","px-4","pr-8","leading-tight","focus:outline-none","focus:border-l","focus:border-r","focus:bg-white","focus:border-gray-500",3,"ngModel","ngModelChange","change"],["value","Pendiente"],["value","En proceso"],["value","Completada"],["value","Rechazada"],["value",""],[1,"pointer-events-none","absolute","inset-y-0","right-0","flex","items-center","px-2","text-gray-700"],["viewBox","0 0 20 20",1,"fill-current","h-4","w-4"],["d","M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"],[1,"block","relative"],[1,"h-full","absolute","inset-y-0","left-0","flex","items-center","pl-2"],["viewBox","0 0 24 24",1,"h-4","w-4","fill-current","text-gray-500","cursor-pointer","hover:text-secondary-500"],["d","M10 4a6 6 0 100 12 6 6 0 000-12zm-8 6a8 8 0 1114.32 4.906l5.387 5.387a1 1 0 01-1.414 1.414l-5.387-5.387A8 8 0 012 10z"],["placeholder","Buscar",1,"appearance-none","rounded-r","rounded-l","sm:rounded-l-none","border","border-gray-400","border-b","block","pl-8","pr-6","py-2","w-full","bg-white","text-sm","placeholder-gray-400","text-gray-700","focus:bg-white","focus:placeholder-gray-600","focus:text-gray-700","focus:outline-none",3,"ngModel","ngModelChange","change"],[1,"bg-white","text-sm","focus:outline-none","w-max","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","change","ngModelChange"],["value","10"],["value","20"],["value","50"],["value","100"],["class","bg-white text-sm w-full md:max-w-44 focus:outline-none px-2 py-2 md:py-0 md:ml-2 mt-2 md:mt-0 border text-gray-600 border-gray-400 rounded",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","text-sm px-4 mb-2",4,"ngIf"],[1,"px-4","py-2","overflow-x-auto"],[1,"inline-block","max-h-96","overflow-y-auto","min-w-full","pb-5"],[1,"min-w-full","leading-normal"],[1,"border"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","w-max","flex","items-center","justify-center","focus:outline-none",3,"click"],[1,"ml-2"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-down",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-chevron-up",4,"ngIf"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","feather feather-minus",4,"ngIf"],[1,"px-5","py-2","border-b-2","border-gray-200","bg-gray-100","text-left","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"cursor-pointer","flex","items-center","focus:outline-none",3,"click"],[1,"ml-2","text-gray-600"],[1,"px-5","border-b-2","border-gray-200","bg-gray-100","text-center","text-sm","font-semibold","text-gray-900","tracking-wider"],[1,"px-5","py-5","mt-4","text-sm","bg-white","border-t","flex","shadow","flex-col","xs:flex-row","items-center","xs:justify-between"],["nextLabel","Siguiente","previousLabel","Anterior",3,"pageChange"],[1,"bg-white","text-sm","w-full","md:max-w-44","focus:outline-none","px-2","py-2","md:py-0","md:ml-2","mt-2","md:mt-0","border","text-gray-600","border-gray-400","rounded",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-sm","px-4","mb-2"],[1,"bg-gray-100","w-max","p-2","ml-2","rounded","border","border-gray-400"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-down"],["points","6 9 12 15 18 9"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-chevron-up"],["points","18 15 12 9 6 15"],["width","15","height","15","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-minus"],["x1","5","y1","12","x2","19","y2","12"],[1,"animate__animated","animate__fadeIn"],[1,"px-5","py-2","border-b","border-gray-200","text-xs"],[1,"text-gray-900","whitespace-no-wrap"],[1,"text-gray-900","w-max","whitespace-no-wrap",3,"title"],[1,"text-gray-900","w-max","whitespace-no-wrap"],[1,"text-white","w-max","whitespace-no-wrap","p-1","rounded",3,"ngClass"],[1,"px-5","py-2","border-b","border-gray-200","text-xs","text-center"],[1,"flex","items-center","justify-center","text-gray-900","whitespace-no-wrap"],["title","Detalles de solicitud",1,"p-2","bg-purple-600","text-white","rounded","hover:opacity-90","ml-2",3,"routerLink"],["stroke-linecap","round","stroke-linejoin","round","d","M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"],["stroke-linecap","round","stroke-linejoin","round","d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"],[1,"p-4","text-white"],[1,"w-full"],["colspan","6",1,"text-gray-500","text-sm","p-2","border","border-gray-300","text-center","bg-gray-50","mt-4"],["class","animate__animated animate__fadeIn"]],template:function(p,i){p&1&&(e(0,"div",0)(1,"app-tarjeta-lista")(2,"div",1)(3,"div")(4,"div",2)(5,"div",3)(6,"h2",4),l(7," Listado de solicitudes "),t(),e(8,"p"),l(9),t()(),e(10,"div")(11,"button",5),s(),e(12,"svg",6),c(13,"path",7),t()()()(),x(),e(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"select",12),g("ngModelChange",function(h){return i.filtro.estado=h})("change",function(){return i.cambiarPagina(1)}),e(19,"option",13),l(20," Pendientes "),t(),e(21,"option",14),l(22," En proceso "),t(),e(23,"option",15),l(24," Completadas "),t(),e(25,"option",16),l(26," Rechazadas "),t(),e(27,"option",17),l(28," Todas "),t()(),e(29,"div",18),s(),e(30,"svg",19),c(31,"path",20),t()()()(),x(),e(32,"div",21)(33,"span",22),s(),e(34,"svg",23),c(35,"path",24),t()(),x(),e(36,"input",25),g("ngModelChange",function(h){return i.filtro.parametro=h})("change",function(){return i.cambiarPagina(1)}),t()(),e(37,"select",26),g("change",function(){return i.cambiarPagina(1)})("ngModelChange",function(h){return i.cantidadItems=h}),e(38,"option",27),l(39," 10 elementos "),t(),e(40,"option",28),l(41," 20 elementos "),t(),e(42,"option",29),l(43," 50 elementos "),t(),e(44,"option",30),l(45," 100 elementos "),t()(),v(46,oe,2,2,"select",31),t()(),v(47,ae,4,1,"div",32),e(48,"div",33)(49,"div",34)(50,"table",35)(51,"thead")(52,"tr",36)(53,"th",37)(54,"div",38),g("click",function(){return i.ordenarPorColumna("id")}),e(55,"span"),l(56," Numero "),t(),e(57,"span",39),v(58,le,2,0,"svg",40)(59,de,2,0,"svg",41)(60,se,2,0,"svg",42),t()()(),e(61,"th",37)(62,"div",38),g("click",function(){return i.ordenarPorColumna("createdAt")}),e(63,"span"),l(64," Fecha y hora "),t(),e(65,"span",39),v(66,ce,2,0,"svg",40)(67,me,2,0,"svg",41)(68,pe,2,0,"svg",42),t()()(),e(69,"th",43)(70,"div",44),g("click",function(){return i.ordenarPorColumna("dependencia.nombre")}),e(71,"span"),l(72," Dependencia "),t(),e(73,"span",45),v(74,ue,2,0,"svg",40)(75,ge,2,0,"svg",41)(76,ve,2,0,"svg",42),t()()(),e(77,"th",43)(78,"div",44),g("click",function(){return i.ordenarPorColumna("tipoOrdenServicio.descripcion")}),e(79,"span"),l(80," Tipo "),t(),e(81,"span",45),v(82,fe,2,0,"svg",40)(83,he,2,0,"svg",41)(84,_e,2,0,"svg",42),t()()(),e(85,"th",46)(86,"div",44),g("click",function(){return i.ordenarPorColumna("activo")}),e(87,"span"),l(88," Estado "),t(),e(89,"span",39),v(90,Se,2,0,"svg",40)(91,xe,2,0,"svg",41)(92,be,2,0,"svg",42),t()()(),e(93,"th",46),l(94," Acci\xF3n "),t()()(),e(95,"tbody"),O(96,Ce,24,20,"tr",74,ie,!1,Ee,5,0),b(99,"paginate"),t()()()()(),e(100,"div",47)(101,"pagination-controls",48),g("pageChange",function(h){return i.cambiarPagina(h)}),t()()()()()),p&2&&(o(9),f(" Total de solicitudes: ",i.ordenes.length," "),o(9),a("ngModel",i.filtro.estado),o(18),a("ngModel",i.filtro.parametro),o(1),a("ngModel",i.cantidadItems),o(9),a("ngIf",i.authService.usuario.role==="USER_ROLE"),o(1),a("ngIf",i.authService.usuario.role==="USER_ROLE"),o(11),a("ngIf",i.ordenar.columna=="id"&&i.ordenar.direccion=="asc"),o(1),a("ngIf",i.ordenar.columna=="id"&&i.ordenar.direccion=="desc"),o(1),a("ngIf",i.ordenar.columna!="id"),o(6),a("ngIf",i.ordenar.columna=="createdAt"&&i.ordenar.direccion=="asc"),o(1),a("ngIf",i.ordenar.columna=="createdAt"&&i.ordenar.direccion=="desc"),o(1),a("ngIf",i.ordenar.columna!="createdAt"),o(6),a("ngIf",i.ordenar.columna=="dependencia.nombre"&&i.ordenar.direccion=="asc"),o(1),a("ngIf",i.ordenar.columna=="dependencia.nombre"&&i.ordenar.direccion=="desc"),o(1),a("ngIf",i.ordenar.columna!="dependencia.nombre"),o(6),a("ngIf",i.ordenar.columna=="tipoOrdenServicio.descripcion"&&i.ordenar.direccion=="asc"),o(1),a("ngIf",i.ordenar.columna=="tipoOrdenServicio.descripcion"&&i.ordenar.direccion=="desc"),o(1),a("ngIf",i.ordenar.columna!="tipoOrdenServicio.descripcion"),o(6),a("ngIf",i.ordenar.columna=="activo"&&i.ordenar.direccion=="asc"),o(1),a("ngIf",i.ordenar.columna=="activo"&&i.ordenar.direccion=="desc"),o(1),a("ngIf",i.ordenar.columna!="activo"),o(4),k(C(99,22,i.ordenes,M(25,Oe,i.cantidadItems,i.paginaActual))))},dependencies:[G,A,L,j,q,$,Z,R,U,z,H,ee,Y,W,X,B,N,Q,te],encapsulation:2});let n=r;return n})();export{Xe as default};
